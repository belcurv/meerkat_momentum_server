$(document).ready(function(){BG.init(),Panels.init(),Settings.init(),Quotes.init(),Time.init(),Focus.init(),Todos.init(),Weather.init(),setInterval(Time.init,2e4)});var BG=function(){"use strict";function e(){var e="https://unsplash.it/1920/1080/?random";$.when(t(e)).done(s)}function t(e){return $.Deferred(function(t){var s=new Image;s.onload=function(){t.resolve(s)},s.onerror=function(){t.reject()},s.src=e}).promise()}function s(e){$(".splash").append(e).css("opacity",1)}return{init:e}}(),Focus=function(){function e(){r.$focusInput=$("#focus-input"),r.$focusCheckbox=$("#focus-chkbx"),r.$focusClose=$("#focus-close"),r.$focusList=$(".focus-list"),r.$focusListMsg=$(".focus-list-message")}function t(){$("form").submit(function(){return!1}),r.$focusInput.on("keyup",s),r.$focusCheckbox.on("click",n),r.$focusClose.on("click",a)}function s(e){var t,s=$(e.target),a=s.val().trim();13===e.which&&a&&(t={val:a,isChecked:!1},LS.setData("focus-storage",t),s.val(""),o())}function a(e){var t=(LS.getData("focus-storage"),{val:null,isChecked:!1});LS.setData("focus-storage",t),o()}function n(e){var t=LS.getData("focus-storage"),s={val:t.val,isChecked:!t.isChecked};LS.setData("focus-storage",s),o()}function o(){var e=LS.getData("focus-storage");return e&&e.val?(r.$focusInput.css("display","none"),r.$focusList.css("display","block"),r.$focusListMsg.html(e.val),void(e.isChecked?(r.$focusListMsg.addClass("finished"),r.$focusCheckbox.html('<i class="fa fa-check-square-o" aria-hidden="true"></i>'),r.$focusClose.html('<i class="fa fa-plus" aria-hidden="true"></i>')):(r.$focusListMsg.removeClass("finished"),r.$focusCheckbox.html('<i class="fa fa-square-o" aria-hidden="true"></i>'),r.$focusClose.html('<i class="fa fa-times" aria-hidden="true"></i>')))):(r.$focusInput.css("display","block"),void r.$focusList.css("display","none"))}function i(){e(),t()}var r={};return{init:i}}(),LS=function(){function e(e,t){n&&n.setItem(e,JSON.stringify(t))}function t(e){if(n)return JSON.parse(n.getItem(e))}function s(){if(n)return n.clear()}function a(e){if(n)return n.removeItem(e)}var n=function(){var e,t,s=(new Date).toString();try{return e=window.localStorage,e.setItem(s,s),t=e.getItem(s)===s,e.removeItem(s),t&&e}catch(e){}}();return{setData:e,getData:t,deleteData:a,clearData:s}}(),Panels=function(){"use strict";function e(){c.$meerkatBtn=$("#meerkat-btn"),c.$aboutPanel=$("#about-panel"),c.$todosBtn=$("#todos-btn"),c.$todosPanel=$("#todos-panel"),c.$settingsBtn=$("#settings-btn"),c.$settingsPanel=$("#settings-panel"),c.$weatherBtn=$("#weather-feature"),c.$weatherPanel=$("#weather-panel"),c.$overlay=$('<div id="overlay"></div>')}function t(){c.$overlay.on("click",s),c.$meerkatBtn.on("click",a),c.$todosBtn.on("click",n),c.$settingsBtn.on("click",o),c.$weatherBtn.on("click",i)}function s(e){e.preventDefault(),c.$overlay.hide(),c.$aboutPanel.removeClass("left-panel-show"),c.$todosPanel.removeClass("right-panel-show"),c.$settingsPanel.removeClass("left-panel-show"),c.$weatherPanel.removeClass("right-panel-show"),e.stopPropagation()}function a(e){c.$aboutPanel.toggleClass("left-panel-show"),c.$overlay.show(),c.$todosPanel.removeClass("right-panel-show"),c.$settingsPanel.removeClass("left-panel-show"),c.$weatherPanel.removeClass("right-panel-show"),e.stopPropagation()}function n(e){c.$todosPanel.toggleClass("right-panel-show"),c.$overlay.toggle(),c.$aboutPanel.removeClass("left-panel-show"),c.$settingsPanel.removeClass("left-panel-show"),c.$weatherPanel.removeClass("right-panel-show"),e.stopPropagation()}function o(e){c.$settingsPanel.toggleClass("left-panel-show"),c.$overlay.toggle(),c.$aboutPanel.removeClass("left-panel-show"),c.$todosPanel.removeClass("right-panel-show"),c.$weatherPanel.removeClass("right-panel-show"),e.stopPropagation()}function i(e){c.$weatherPanel.toggleClass("right-panel-show"),c.$overlay.toggle(),c.$aboutPanel.removeClass("left-panel-show"),c.$settingsPanel.removeClass("left-panel-show"),c.$todosPanel.removeClass("right-panel-show"),e.stopPropagation()}function r(){e(),c.$overlay.hide(),$("body").append(c.$overlay),t()}var c={};return{init:r}}(),Quotes=function(){function e(){i.$quoteFeature=$("#quoteFeature")}function t(){var e={endpoint:"https://quotesondesign.com/wp-json/posts",params:{"filter[orderby]":"rand","filter[posts_per_page]":1,processdate:(new Date).getTime()}};$.getJSON(e.endpoint,e.params).then(a).catch(n)}function s(e){var t=/(<([^>]+)>)|(&lt;([^>]+)&gt;)/gi,s=$("<textarea></textarea>");return s.html(e),s.val().replace(t,"")}function a(e){var t=s(e[0].content);i.$quoteFeature.attr("href",e[0].link).attr("target","_blank").html(t)}function n(e){console.warn(e)}function o(){e(),t()}var i={};return{init:o}}(),Settings=function(){function e(){r.$settingsPanel=$("#settings-panel"),r.$userName=r.$settingsPanel.find("#name-input"),r.$clockFormat=r.$settingsPanel.find("#12-hr-clock-chkbx"),r.$showWeather=r.$settingsPanel.find("#show-weather-chkbx"),r.$showTodos=r.$settingsPanel.find("#show-todo-chkbx"),r.$saveSettings=r.$settingsPanel.find("#save-settings-btn"),r.$clearSettings=r.$settingsPanel.find("#clear-settings-btn")}function t(){r.$saveSettings.on("click",a),r.$clearSettings.on("click",n)}function s(){return LS.getData("momentum-settings")?{userName:LS.getData("momentum-settings").userName,clockFormat:LS.getData("momentum-settings").clockFormat,showWeather:LS.getData("momentum-settings").showWeather,showTodos:LS.getData("momentum-settings").showTodos}:{userName:void 0,clockFormat:!0,showWeather:!0,showTodos:!0}}function a(e){e.preventDefault(),c={userName:r.$userName[0].value||void 0,clockFormat:r.$clockFormat[0].checked,showWeather:r.$showWeather[0].checked,showTodos:r.$showTodos[0].checked},LS.setData("momentum-settings",c),o(),e.stopPropagation()}function n(e){e.preventDefault(),LS.deleteData("momentum-settings"),r.$userName[0].value="",r.$clockFormat[0].checked=!0,r.$showWeather[0].checked=!0,r.$showTodos[0].checked=!0,o(),e.stopPropagation()}function o(){c.userName&&(r.$userName[0].value=c.userName),r.$clockFormat[0].checked=c.clockFormat,r.$showWeather[0].checked=c.showWeather,r.$showTodos[0].checked=c.showTodos,Time.init(),s(),c.showTodos?$("#todos-btn").css("display","block"):$("#todos-btn").css("display","none"),c.showWeather?$("#weather-feature").css("display","block"):$("#weather-feature").css("display","none"),$("#settings-panel").removeClass("left-panel-show"),$("#overlay").hide()}function i(){e(),t(),o()}var r={},c=s();return{init:i}}(),Time=function(){function e(){var e=Math.floor(Math.random()*h.length);return h[e]}function t(){var e,t,s=n(a());return t=LS.getData("momentum-settings")?LS.getData("momentum-settings").userName:p,e=s<12?"morning":s>=12&&s<17?"afternoon":"evening","Good "+e+", "+t+"."}function s(){var e=LS.getData("momentum-settings");return!e||e.clockFormat}function a(){f=new Date}function n(){return f.getHours()}function o(){return f.getMinutes()}function i(){var e,t;return e=s()?n()>=13&&n()<24?n()%12:0===n()?12:n():n(),t=("0"+o()).slice(-2),e+":"+t}function r(){return n()>12?"PM":"AM"}function c(){$("#time").text(i())}function l(){$("#time-period").text(r())}function u(){$("#time-message").text(t())}function d(){a(),c(),s()&&l(),u()}var f,h=["pal","sexy","handsome","smarty pants","good looking","classy","human shield","meat bag"],p=e();return{init:d}}(),Todos=function(){function e(){r.$todosPanel=$("#todos-panel"),r.$todosInput=r.$todosPanel.find("#todos-input"),r.todosList=r.$todosPanel.find("#todos-list")}function t(){$("form").submit(function(){return!1}),r.$todosInput.on("keyup",s),$(document).on("click",".delete-task",n),$(document).on("click",".check-task",o)}function s(e){var t,s,a,n=r.$todosInput.val().trim();13===e.which&&n&&(t=LS.getData("todo-list")?LS.getData("todo-list"):[],s="object"==typeof t[0]?t[0].id+1:0,a={id:s,task:n,isChecked:!1},t.unshift(a),LS.setData("todo-list",t),r.$todosInput.val(""),r.todosList.prepend('<li id="'+a.id+'"><span class="check-task"><i class="fa fa-square-o" aria-hidden="true"></i></span>'+a.task+'<span class="delete-task"><i class="fa fa-times" aria-hidden="true"></i></span></li>'))}function a(){var e=LS.getData("todo-list");e&&e.forEach(function(e){var t='<li class="finished" id=\''+e.id+'\'><span class="check-task"><i class="fa fa-check-square-o" aria-hidden="true"></i></span>'+e.task+'<span class="delete-task"><i class="fa fa-times" aria-hidden="true"></i></span></li>',s="<li id='"+e.id+'\'><span class="check-task"><i class="fa fa-square-o" aria-hidden="true"></i></span>'+e.task+'<span class="delete-task"><i class="fa fa-times" aria-hidden="true"></i></span></li>';e.isChecked?r.todosList.append(t):r.todosList.append(s)})}function n(e){var t=LS.getData("todo-list"),s=$(e.target).parent().parent(),a=s.attr("id"),n=t.findIndex(function(e){return e.id==a});t.splice(n,1),s.remove(),LS.setData("todo-list",t)}function o(e){var t=LS.getData("todo-list"),s=$(e.target),a=s.parent().parent(),n=a.attr("id"),o=t.findIndex(function(e){return e.id==n});t[o].isChecked=!t[o].isChecked,t[o].isChecked?(s.removeClass("fa-square-o").addClass("fa-check-square-o"),a.addClass("finished")):(s.removeClass("fa-check-square-o").addClass("fa-square-o"),a.removeClass("finished")),LS.setData("todo-list",t)}function i(){e(),t(),a()}var r={};return{init:i}}(),Weather=function(){"use strict";function e(){$.getJSON("https://ipinfo.io/geo").then(function(e){var t=e.loc.split(",");return{loctnObj:e,latitude:t[0],longitude:t[1]}}).then(t).catch(s)}function t(e){console.log(e);var t="3530553cce7adca5c5525b813494ada0",s="https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/"+t+"/"+e.latitude+","+e.longitude;$.get({url:s,headers:"Access-Control-Allow-Origin: *",dataTyoe:"jsonp",success:function(t){var s=t.currently.icon;$("#icon_img").attr("src","./assets/SVG/"+s+".svg"),$("#weather-feature").append('<p class="temp">'+Math.round(t.currently.temperature)+" &degF</p>"),$("#weather-feature").append('<p class="location">'+e.loctnObj.city.toUpperCase()+"</p>")}})}function s(){console.warn("Error fetching weather")}function a(){e()}return{init:a}}();