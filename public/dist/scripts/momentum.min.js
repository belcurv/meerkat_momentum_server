$(document).ready(function(){BG.init(),Panels.init(),Settings.init(),Quotes.init(),Time.init(),Focus.init(),Todos.init(),Weather.init(),setInterval(Time.init,2e4)});var BG=function(){"use strict";function t(){var t="https://unsplash.it/1920/1080/?random";$.when(e(t)).done(a)}function e(t){return $.Deferred(function(e){var a=new Image;a.onload=function(){e.resolve(a)},a.onerror=function(){e.reject()},a.src=t}).promise()}function a(t){$(".splash").append(t).css("opacity",1)}return{init:t}}(),Focus=function(){function t(){r.$focusInput=$("#focus-input"),r.$focusCheckbox=$("#focus-chkbx"),r.$focusClose=$("#focus-close"),r.$focusList=$(".focus-list"),r.$focusListMsg=$(".focus-list-message")}function e(){$("form").submit(function(){return!1}),r.$focusInput.on("keyup",a),r.$focusCheckbox.on("click",s),r.$focusClose.on("click",n)}function a(t){var e,a=$(t.target),n=a.val().trim();13===t.which&&n&&(e={val:n,isChecked:!1},LS.setData("focus-storage",e),a.val(""),o())}function n(t){var e=(LS.getData("focus-storage"),{val:null,isChecked:!1});LS.setData("focus-storage",e),o()}function s(t){var e=LS.getData("focus-storage"),a={val:e.val,isChecked:!e.isChecked};LS.setData("focus-storage",a),o()}function o(){var t=LS.getData("focus-storage");return t&&t.val?(r.$focusInput.css("display","none"),r.$focusList.css("display","block"),r.$focusListMsg.html(t.val),void(t.isChecked?(r.$focusListMsg.addClass("finished"),r.$focusCheckbox.html('<i class="fa fa-check-square-o" aria-hidden="true"></i>'),r.$focusClose.html('<i class="fa fa-plus" aria-hidden="true"></i>')):(r.$focusListMsg.removeClass("finished"),r.$focusCheckbox.html('<i class="fa fa-square-o" aria-hidden="true"></i>'),r.$focusClose.html('<i class="fa fa-times" aria-hidden="true"></i>')))):(r.$focusInput.css("display","block"),void r.$focusList.css("display","none"))}function i(){t(),e()}var r={};return{init:i}}(),LS=function(){function t(t,e){s&&s.setItem(t,JSON.stringify(e))}function e(t){if(s)return JSON.parse(s.getItem(t))}function a(){if(s)return s.clear()}function n(t){if(s)return s.removeItem(t)}var s=function(){var t,e,a=(new Date).toString();try{return t=window.localStorage,t.setItem(a,a),e=t.getItem(a)===a,t.removeItem(a),e&&t}catch(t){}}();return{setData:t,getData:e,deleteData:n,clearData:a}}(),Panels=function(){"use strict";function t(){c.$meerkatBtn=$("#meerkat-btn"),c.$aboutPanel=$("#about-panel"),c.$todosBtn=$("#todos-btn"),c.$todosPanel=$("#todos-panel"),c.$settingsBtn=$("#settings-btn"),c.$settingsPanel=$("#settings-panel"),c.$weatherBtn=$("#weather-feature"),c.$weatherPanel=$("#weather-panel"),c.$overlay=$('<div id="overlay"></div>')}function e(){c.$overlay.on("click",a),c.$meerkatBtn.on("click",n),c.$todosBtn.on("click",s),c.$settingsBtn.on("click",o),c.$weatherBtn.on("click",i)}function a(t){t.preventDefault(),c.$overlay.hide(),c.$aboutPanel.removeClass("left-panel-show"),c.$todosPanel.removeClass("right-panel-show"),c.$settingsPanel.removeClass("left-panel-show"),c.$weatherPanel.removeClass("right-panel-show"),t.stopPropagation()}function n(t){c.$aboutPanel.toggleClass("left-panel-show"),c.$overlay.show(),c.$todosPanel.removeClass("right-panel-show"),c.$settingsPanel.removeClass("left-panel-show"),c.$weatherPanel.removeClass("right-panel-show"),t.stopPropagation()}function s(t){c.$todosPanel.toggleClass("right-panel-show"),c.$overlay.toggle(),c.$aboutPanel.removeClass("left-panel-show"),c.$settingsPanel.removeClass("left-panel-show"),c.$weatherPanel.removeClass("right-panel-show"),t.stopPropagation()}function o(t){c.$settingsPanel.toggleClass("left-panel-show"),c.$overlay.toggle(),c.$aboutPanel.removeClass("left-panel-show"),c.$todosPanel.removeClass("right-panel-show"),c.$weatherPanel.removeClass("right-panel-show"),t.stopPropagation()}function i(t){c.$weatherPanel.toggleClass("right-panel-show"),c.$overlay.toggle(),c.$aboutPanel.removeClass("left-panel-show"),c.$settingsPanel.removeClass("left-panel-show"),c.$todosPanel.removeClass("right-panel-show"),t.stopPropagation()}function r(){t(),c.$overlay.hide(),$("body").append(c.$overlay),e()}var c={};return{init:r}}(),Quotes=function(){function t(){i.$quoteFeature=$("#quoteFeature")}function e(){var t={endpoint:"https://quotesondesign.com/wp-json/posts",params:{"filter[orderby]":"rand","filter[posts_per_page]":1,processdate:(new Date).getTime()}};$.getJSON(t.endpoint,t.params).then(n).catch(s)}function a(t){var e=/(<([^>]+)>)|(&lt;([^>]+)&gt;)/gi,a=$("<textarea></textarea>");return a.html(t),a.val().replace(e,"")}function n(t){var e=a(t[0].content);i.$quoteFeature.attr("href",t[0].link).attr("target","_blank").html(e)}function s(t){console.warn(t)}function o(){t(),e()}var i={};return{init:o}}(),Settings=function(){function t(){r.$settingsPanel=$("#settings-panel"),r.$userName=r.$settingsPanel.find("#name-input"),r.$clockFormat=r.$settingsPanel.find("#12-hr-clock-chkbx"),r.$showWeather=r.$settingsPanel.find("#show-weather-chkbx"),r.$showTodos=r.$settingsPanel.find("#show-todo-chkbx"),r.$saveSettings=r.$settingsPanel.find("#save-settings-btn"),r.$clearSettings=r.$settingsPanel.find("#clear-settings-btn")}function e(){r.$saveSettings.on("click",n),r.$clearSettings.on("click",s)}function a(){return LS.getData("momentum-settings")?{userName:LS.getData("momentum-settings").userName,clockFormat:LS.getData("momentum-settings").clockFormat,showWeather:LS.getData("momentum-settings").showWeather,showTodos:LS.getData("momentum-settings").showTodos}:{userName:void 0,clockFormat:!0,showWeather:!0,showTodos:!0}}function n(t){t.preventDefault(),c={userName:r.$userName[0].value||void 0,clockFormat:r.$clockFormat[0].checked,showWeather:r.$showWeather[0].checked,showTodos:r.$showTodos[0].checked},LS.setData("momentum-settings",c),o(),t.stopPropagation()}function s(t){t.preventDefault(),LS.deleteData("momentum-settings"),r.$userName[0].value="",r.$clockFormat[0].checked=!0,r.$showWeather[0].checked=!0,r.$showTodos[0].checked=!0,o(),t.stopPropagation()}function o(){c.userName&&(r.$userName[0].value=c.userName),r.$clockFormat[0].checked=c.clockFormat,r.$showWeather[0].checked=c.showWeather,r.$showTodos[0].checked=c.showTodos,Time.init(),a(),c.showTodos?$("#todos-btn").css("display","block"):$("#todos-btn").css("display","none"),c.showWeather?$("#weather-feature").css("display","block"):$("#weather-feature").css("display","none"),$("#settings-panel").removeClass("left-panel-show"),$("#overlay").hide()}function i(){t(),e(),o()}var r={},c=a();return{init:i}}(),Time=function(){function t(){var t=Math.floor(Math.random()*f.length);return f[t]}function e(){var t,e,a=s(n());return e=LS.getData("momentum-settings")?LS.getData("momentum-settings").userName:p,t=a<12?"morning":a>=12&&a<17?"afternoon":"evening","Good "+t+", "+e+"."}function a(){var t=LS.getData("momentum-settings");return!t||t.clockFormat}function n(){h=new Date}function s(){return h.getHours()}function o(){return h.getMinutes()}function i(){var t,e;return t=a()?s()>=13&&s()<24?s()%12:0===s()?12:s():s(),e=("0"+o()).slice(-2),t+":"+e}function r(){return s()>12?"PM":"AM"}function c(){$("#time").text(i())}function l(){$("#time-period").text(r())}function u(){$("#time-message").text(e())}function d(){n(),c(),a()&&l(),u()}var h,f=["pal","sexy","handsome","smarty pants","good looking","classy","human shield","meat bag"],p=t();return{init:d}}(),Todos=function(){function t(){r.$todosPanel=$("#todos-panel"),r.$todosInput=r.$todosPanel.find("#todos-input"),r.todosList=r.$todosPanel.find("#todos-list")}function e(){$("form").submit(function(){return!1}),r.$todosInput.on("keyup",a),$(document).on("click",".delete-task",s),$(document).on("click",".check-task",o)}function a(t){var e,a,n,s=r.$todosInput.val().trim();13===t.which&&s&&(e=LS.getData("todo-list")?LS.getData("todo-list"):[],a="object"==typeof e[0]?e[0].id+1:0,n={id:a,task:s,isChecked:!1},e.unshift(n),LS.setData("todo-list",e),r.$todosInput.val(""),r.todosList.prepend('<li id="'+n.id+'"><span class="check-task"><i class="fa fa-square-o" aria-hidden="true"></i></span>'+n.task+'<span class="delete-task"><i class="fa fa-times" aria-hidden="true"></i></span></li>'))}function n(){var t=LS.getData("todo-list");t&&t.forEach(function(t){var e='<li class="finished" id=\''+t.id+'\'><span class="check-task"><i class="fa fa-check-square-o" aria-hidden="true"></i></span>'+t.task+'<span class="delete-task"><i class="fa fa-times" aria-hidden="true"></i></span></li>',a="<li id='"+t.id+'\'><span class="check-task"><i class="fa fa-square-o" aria-hidden="true"></i></span>'+t.task+'<span class="delete-task"><i class="fa fa-times" aria-hidden="true"></i></span></li>';t.isChecked?r.todosList.append(e):r.todosList.append(a)})}function s(t){var e=LS.getData("todo-list"),a=$(t.target).parent().parent(),n=a.attr("id"),s=e.findIndex(function(t){return t.id==n});e.splice(s,1),a.remove(),LS.setData("todo-list",e)}function o(t){var e=LS.getData("todo-list"),a=$(t.target),n=a.parent().parent(),s=n.attr("id"),o=e.findIndex(function(t){return t.id==s});e[o].isChecked=!e[o].isChecked,e[o].isChecked?(a.removeClass("fa-square-o").addClass("fa-check-square-o"),n.addClass("finished")):(a.removeClass("fa-check-square-o").addClass("fa-square-o"),n.removeClass("finished")),LS.setData("todo-list",e)}function i(){t(),e(),n()}var r={};return{init:i}}(),Weather=function(){"use strict";function t(){$.getJSON("https://freegeoip.net/json/184.58.233.92").then(e).catch(s)}function e(t){var e="3530553cce7adca5c5525b813494ada0",s="https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/"+e+"/"+t.latitude+","+t.longitude;$.get({url:s,headers:"Access-Control-Allow-Origin: *",dataTyoe:"jsonp",success:function(e){a(t,e),n(t,e)}})}function a(t,e){var a=e.currently.icon,n=Math.round(e.currently.temperature),s=t.city.toUpperCase(),o=$('<div id="icon_img"></div>'),i='<p class="temp">'+n+" &degF</p>",r='<p class="location">'+s+"</p>";o.append('<i class="wi wi-'+a+'"></i>'),$("#weather-feature").append(o).append(i).append(r)}function n(t,e){var a=e.daily.summary,n=e.daily.data,s=(t.city.toUpperCase(),$("#weather-panel .panel-content")),o=$("<p>Summary: "+a+"</p>"),i=$("<table></table>");$("<pre>"+JSON.stringify(n,null,2)+"</pre>");i.append(["<thead>","<tr>","<th>Day</th>","<th>Low</th>","<th>High</th>","<th>Weather</th>","</tr","</thead>","<tbody>"].join("")),n.forEach(function(t){var e=new Date(1e3*t.time).toDateString(),a=$("<tr></tr>");a.append("<td>"+e.slice(0,10)+"</td>").append("<td>"+Math.round(t.temperatureMin)+"</td>").append("<td>"+Math.round(t.temperatureMax)+"</td>").append("<td>"+t.icon+' <i class="wi wi-'+t.icon+'"></i></td>'),i.append(a)}),s.append(o).append(i)}function s(){console.warn("Error fetching weather")}function o(){t()}return{init:o}}();