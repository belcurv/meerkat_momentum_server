$(document).ready(function(){BG.getBackground(),Panels.init(),Settings.init(),Quotes.init(),Time.init(),Focus.init(),Todos.init(),Weather.init(),setInterval(Time.init,2e4)});var BG=function(t){"use strict";function e(){var e=["static_background.jpg","13.jpg"],a=Math.floor(Math.random()*e.length);t(".splash").css("background-image","url(assets/"+e[a]+")").css("opacity",1)}return{getBackground:e}}(jQuery),Focus=function(){function t(){r.$focusInput=$("#focus-input"),r.$focusCheckbox=$("#focus-chkbx"),r.$focusClose=$("#focus-close"),r.$focusList=$(".focus-list"),r.$focusListMsg=$(".focus-list-message")}function e(){$("form").submit(function(){return!1}),r.$focusInput.on("keyup",a),r.$focusCheckbox.on("click",n),r.$focusClose.on("click",s)}function a(t){var e,a=$(t.target),s=a.val().trim();13===t.which&&s&&(e={val:s,isChecked:!1},LS.setData("focus-storage",e),a.val(""),o())}function s(t){var e=(LS.getData("focus-storage"),{val:null,isChecked:!1});LS.setData("focus-storage",e),o()}function n(t){var e=LS.getData("focus-storage"),a={val:e.val,isChecked:!e.isChecked};LS.setData("focus-storage",a),o()}function o(){var t=LS.getData("focus-storage");return t&&t.val?(r.$focusInput.css("display","none"),r.$focusList.css("display","block"),r.$focusListMsg.html(t.val),void(t.isChecked?(r.$focusListMsg.addClass("finished"),r.$focusCheckbox.html('<i class="fa fa-check-square-o" aria-hidden="true"></i>'),r.$focusClose.html('<i class="fa fa-plus" aria-hidden="true"></i>')):(r.$focusListMsg.removeClass("finished"),r.$focusCheckbox.html('<i class="fa fa-square-o" aria-hidden="true"></i>'),r.$focusClose.html('<i class="fa fa-times" aria-hidden="true"></i>')))):(r.$focusInput.css("display","block"),void r.$focusList.css("display","none"))}function i(){t(),e()}var r={};return{init:i}}(),LS=function(){function t(t,e){n&&n.setItem(t,JSON.stringify(e))}function e(t){if(n)return JSON.parse(n.getItem(t))}function a(){if(n)return n.clear()}function s(t){if(n)return n.removeItem(t)}var n=function(){var t,e,a=(new Date).toString();try{return t=window.localStorage,t.setItem(a,a),e=t.getItem(a)===a,t.removeItem(a),e&&t}catch(t){}}();return{setData:t,getData:e,deleteData:s,clearData:a}}(),Panels=function(){"use strict";function t(){c.$meerkatBtn=$("#meerkat-btn"),c.$aboutPanel=$("#about-panel"),c.$todosBtn=$("#todos-btn"),c.$todosPanel=$("#todos-panel"),c.$settingsBtn=$("#settings-btn"),c.$settingsPanel=$("#settings-panel"),c.$weatherBtn=$("#weather-feature"),c.$weatherPanel=$("#weather-panel"),c.$overlay=$('<div id="overlay"></div>')}function e(){c.$overlay.on("click",a),c.$meerkatBtn.on("click",s),c.$todosBtn.on("click",n),c.$settingsBtn.on("click",o),c.$weatherBtn.on("click",i)}function a(t){t.preventDefault(),c.$overlay.hide(),c.$aboutPanel.removeClass("left-panel-show"),c.$todosPanel.removeClass("right-panel-show"),c.$settingsPanel.removeClass("left-panel-show"),c.$weatherPanel.removeClass("right-panel-show"),t.stopPropagation()}function s(t){c.$aboutPanel.toggleClass("left-panel-show"),c.$overlay.show(),c.$todosPanel.removeClass("right-panel-show"),c.$settingsPanel.removeClass("left-panel-show"),c.$weatherPanel.removeClass("right-panel-show"),t.stopPropagation()}function n(t){c.$todosPanel.toggleClass("right-panel-show"),c.$overlay.toggle(),c.$aboutPanel.removeClass("left-panel-show"),c.$settingsPanel.removeClass("left-panel-show"),c.$weatherPanel.removeClass("right-panel-show"),t.stopPropagation()}function o(t){c.$settingsPanel.toggleClass("left-panel-show"),c.$overlay.toggle(),c.$aboutPanel.removeClass("left-panel-show"),c.$todosPanel.removeClass("right-panel-show"),c.$weatherPanel.removeClass("right-panel-show"),t.stopPropagation()}function i(t){c.$weatherPanel.toggleClass("right-panel-show"),c.$overlay.toggle(),c.$aboutPanel.removeClass("left-panel-show"),c.$settingsPanel.removeClass("left-panel-show"),c.$todosPanel.removeClass("right-panel-show"),t.stopPropagation()}function r(){t(),c.$overlay.hide(),$("body").append(c.$overlay),e()}var c={};return{init:r}}(),Quotes=function(){function t(){i.$quoteFeature=$("#quoteFeature")}function e(){var t={endpoint:"https://quotesondesign.com/wp-json/posts",params:{"filter[orderby]":"rand","filter[posts_per_page]":1,processdate:(new Date).getTime()}};$.getJSON(t.endpoint,t.params).then(s).catch(n)}function a(t){var e=/(<([^>]+)>)|(&lt;([^>]+)&gt;)/gi,a=$("<textarea></textarea>");return a.html(t),a.val().replace(e,"")}function s(t){var e=a(t[0].content);i.$quoteFeature.attr("href",t[0].link).attr("target","_blank").html(e)}function n(t){console.warn(t)}function o(){t(),e()}var i={};return{init:o}}(),Settings=function(){function t(){r.$settingsPanel=$("#settings-panel"),r.$userName=r.$settingsPanel.find("#name-input"),r.$clockFormat=r.$settingsPanel.find("#12-hr-clock-chkbx"),r.$showWeather=r.$settingsPanel.find("#show-weather-chkbx"),r.$showTodos=r.$settingsPanel.find("#show-todo-chkbx"),r.$saveSettings=r.$settingsPanel.find("#save-settings-btn"),r.$clearSettings=r.$settingsPanel.find("#clear-settings-btn")}function e(){r.$saveSettings.on("click",s),r.$clearSettings.on("click",n)}function a(){return LS.getData("momentum-settings")?{userName:LS.getData("momentum-settings").userName,clockFormat:LS.getData("momentum-settings").clockFormat,showWeather:LS.getData("momentum-settings").showWeather,showTodos:LS.getData("momentum-settings").showTodos}:{userName:void 0,clockFormat:!0,showWeather:!0,showTodos:!0}}function s(t){t.preventDefault(),c={userName:r.$userName[0].value||void 0,clockFormat:r.$clockFormat[0].checked,showWeather:r.$showWeather[0].checked,showTodos:r.$showTodos[0].checked},LS.setData("momentum-settings",c),o(),t.stopPropagation()}function n(t){t.preventDefault(),LS.deleteData("momentum-settings"),r.$userName[0].value="",r.$clockFormat[0].checked=!0,r.$showWeather[0].checked=!0,r.$showTodos[0].checked=!0,o(),t.stopPropagation()}function o(){c.userName&&(r.$userName[0].value=c.userName),r.$clockFormat[0].checked=c.clockFormat,r.$showWeather[0].checked=c.showWeather,r.$showTodos[0].checked=c.showTodos,Time.init(),a(),c.showTodos?$("#todos-btn").css("display","block"):$("#todos-btn").css("display","none"),c.showWeather?$("#weather-feature").css("display","block"):$("#weather-feature").css("display","none"),$("#settings-panel").removeClass("left-panel-show"),$("#overlay").hide()}function i(){t(),e(),o()}var r={},c=a();return{init:i}}(),Time=function(){function t(){var t=Math.floor(Math.random()*h.length);return h[t]}function e(){var t,e,a=n(s());return e=LS.getData("momentum-settings")?LS.getData("momentum-settings").userName:g,t=a<12?"morning":a>=12&&a<17?"afternoon":"evening","Good "+t+", "+e+"."}function a(){var t=LS.getData("momentum-settings");return!t||t.clockFormat}function s(){f=new Date}function n(){return f.getHours()}function o(){return f.getMinutes()}function i(){var t,e;return t=a()?n()>=13&&n()<24?n()%12:0===n()?12:n():n(),e=("0"+o()).slice(-2),t+":"+e}function r(){return n()>12?"PM":"AM"}function c(){$("#time").text(i())}function l(){$("#time-period").text(r())}function u(){$("#time-message").text(e())}function d(){s(),c(),a()&&l(),u()}var f,h=["pal","sexy","handsome","smarty pants","good looking","classy","human shield","meat bag","Dave"],g=t();return{init:d}}(),Todos=function(){function t(){r.$todosPanel=$("#todos-panel"),r.$todosInput=r.$todosPanel.find("#todos-input"),r.todosList=r.$todosPanel.find("#todos-list")}function e(){$("form").submit(function(){return!1}),r.$todosInput.on("keyup",a),$(document).on("click",".delete-task",n),$(document).on("click",".check-task",o)}function a(t){var e,a,s,n=r.$todosInput.val().trim();13===t.which&&n&&(e=LS.getData("todo-list")?LS.getData("todo-list"):[],a="object"==typeof e[0]?e[0].id+1:0,s={id:a,task:n,isChecked:!1},e.unshift(s),LS.setData("todo-list",e),r.$todosInput.val(""),r.todosList.prepend('<li id="'+s.id+'"><span class="check-task"><i class="fa fa-square-o" aria-hidden="true"></i></span>'+s.task+'<span class="delete-task"><i class="fa fa-times" aria-hidden="true"></i></span></li>'))}function s(){var t=LS.getData("todo-list");t&&t.forEach(function(t){var e='<li class="finished" id=\''+t.id+'\'><span class="check-task"><i class="fa fa-check-square-o" aria-hidden="true"></i></span>'+t.task+'<span class="delete-task"><i class="fa fa-times" aria-hidden="true"></i></span></li>',a="<li id='"+t.id+'\'><span class="check-task"><i class="fa fa-square-o" aria-hidden="true"></i></span>'+t.task+'<span class="delete-task"><i class="fa fa-times" aria-hidden="true"></i></span></li>';t.isChecked?r.todosList.append(e):r.todosList.append(a)})}function n(t){var e=LS.getData("todo-list"),a=$(t.target).parent().parent(),s=a.attr("id"),n=e.findIndex(function(t){return t.id==s});e.splice(n,1),a.remove(),LS.setData("todo-list",e)}function o(t){var e=LS.getData("todo-list"),a=$(t.target),s=a.parent().parent(),n=s.attr("id"),o=e.findIndex(function(t){return t.id==n});e[o].isChecked=!e[o].isChecked,e[o].isChecked?(a.removeClass("fa-square-o").addClass("fa-check-square-o"),s.addClass("finished")):(a.removeClass("fa-check-square-o").addClass("fa-square-o"),s.removeClass("finished")),LS.setData("todo-list",e)}function i(){t(),e(),s()}var r={};return{init:i}}(),Weather=function(){"use strict";function t(){$.getJSON("https://ipinfo.io/geo").then(function(t){var e=t.loc.split(",");return{loctnObj:t,latitude:e[0],longitude:e[1]}}).then(e).catch(a)}function e(t){console.log(t);var e="3530553cce7adca5c5525b813494ada0",a="https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/"+e+"/"+t.latitude+","+t.longitude;$.get({url:a,headers:"Access-Control-Allow-Origin: *",dataTyoe:"jsonp",success:function(e){var a=e.currently.icon;$("#icon_img").attr("src","./assets/SVG/"+a+".svg"),$("#weather-feature").append('<p class="temp">'+Math.round(e.currently.temperature)+" &degF</p>"),$("#weather-feature").append('<p class="location">'+t.loctnObj.city.toUpperCase()+"</p>")}})}function a(){console.warn("Error fetching weather")}function s(){t()}return{init:s}}();